<Window x:Class="ConcesionaroCarros.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DRIVE &amp; DREAM Elite Automotive Management"
        Height="800" Width="1250"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>

        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
        <DropShadowEffect x:Key="CardShadow" 
                          BlurRadius="12"
                          ShadowDepth="2" Opacity="0.1" 
                          Color="Black"/>

        <Style x:Key="MenuButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#CCCCCC"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="25,0,0,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2A2A2A"/>
                    <Setter Property="Foreground" Value="#D4AF37"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="MenuVentaActivo"
               TargetType="Button"
               BasedOn="{StaticResource MenuButtonStyle}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding VistaActiva}" Value="Venta">
                    <Setter Property="Background" Value="#2A2A2A"/>
                    <Setter Property="Foreground" Value="#D4AF37"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#1A2A3A">
            <DockPanel LastChildFill="True">
                <StackPanel DockPanel.Dock="Top" Margin="25,40,25,10">
                    <TextBlock Text="DRIVE &amp; DREAM" 
                               Foreground="White" 
                               FontSize="22" 
                               FontWeight="Black"/>
                    <TextBlock Text="SISTEMA DE GESTIÓN"
                               Foreground="#D4AF37" 
                               FontSize="10" 
                               FontWeight="Bold"/>
                </StackPanel>

                <StackPanel DockPanel.Dock="Top" Margin="0,15,0,25" HorizontalAlignment="Center">

                    <Grid Width="70" Height="70">

                        <!-- FONDO GRIS -->
                        <Ellipse Fill="#D0D0D0"/>

                        <!-- ICONO USUARIO (NEGRO) -->
                        <Viewbox Width="63" Height="63"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center">
                            <Path Fill="#2A2A3A"
                                  Data="M12,12 C14.21,12 16,10.21 16,8 
                                        C16,5.79 14.21,4 12,4 
                                        C9.79,4 8,5.79 8,8 
                                        C8,10.21 9.79,12 12,12 
                                        Z
                                        M12,14 
                                        C9.33,14 4,15.34 4,18 
                                        L4,20 L20,20 L20,18 
                                        C20,15.34 14.67,14 12,14 Z"/>
                        </Viewbox>

                        <!-- FOTO PERFIL (SI EXISTE) -->
                        <Ellipse>
                            <Ellipse.Fill>
                                <ImageBrush ImageSource="{Binding FotoPerfil}"
                        Stretch="UniformToFill"/>
                            </Ellipse.Fill>
                        </Ellipse>

                    </Grid>
                    <TextBlock Text="{Binding NombreUsuario}"
                               Foreground="White"
                               FontWeight="Bold"
                               FontSize="13"
                               HorizontalAlignment="Center"
                               Margin="0,8,0,0"/>
                </StackPanel>

                <StackPanel DockPanel.Dock="Bottom" Margin="0,0,0,20">
                    <TextBlock Text="Estado: Conectado" 
                               Foreground="#44BB44" 
                               FontSize="10" HorizontalAlignment="Center"/>
                    <TextBlock Text="v2.0.1 - Enterprise Edition" 
                               Foreground="#444" 
                               FontSize="9" 
                               HorizontalAlignment="Center"/>
                </StackPanel>

                <StackPanel DockPanel.Dock="Top" Margin="0,10,0,0">
                    <Button Content="🏠 Dashboard" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowDashboardCommand}"/>

                    <Button Content="🚗 Inventario de Carros" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowCarrosCommand}"/>

                    <Button Content="👥 Directorio de Clientes" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowClientesCommand}"/>

                    <Button Content="👔 Gestión de Empleados" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowEmpleadosCommand}"/>

                    <Button Content="🛠 Gestión de Usuarios"
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowGestionUsuariosCommand}"/>

                    <Separator Background="#222" Margin="20,15"/>
                    <Button Content="💰 Punto de Venta" 
                            Style="{StaticResource MenuVentaActivo}"
                            Command="{Binding ShowVentaCommand}"/>

                    <Button Content="📄 Registro de Facturas" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowFacturaCommand}"/>

                    <Button Content="🚪 Cerrar sesión"
                            Command="{Binding CerrarSesionCommand}"
                            Style="{StaticResource MenuButtonStyle}"
                            Foreground="#E74C3C"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <Grid Grid.Column="1">
            <Grid.Background>
                <ImageBrush ImageSource="https://images.unsplash.com/photo-1492144534655-ae79c964c9d7"
                            Stretch="UniformToFill" 
                            Opacity="0.15"/>
            </Grid.Background>

            <ScrollViewer VerticalScrollBarVisibility="Auto"
                          Visibility="{Binding IsDashboardVisible, Converter={StaticResource BoolToVisibility}}">
                <StackPanel Margin="45">

                    <TextBlock Text="Dashboard General" 
                               FontSize="34" 
                               FontWeight="Bold" 
                               Foreground="#1A1A1A"/>
                    <TextBlock Text="Resumen ejecutivo y analítica de activos en tiempo real." 
                               FontSize="15" 
                               Foreground="#666" 
                               Margin="0,5,0,40"/>

                    <UniformGrid Columns="4" Margin="0,0,0,40">

                        <Border Background="White" 
                                CornerRadius="15" 
                                Margin="8" 
                                Padding="25" 
                                Effect="{StaticResource CardShadow}">
                            <StackPanel>
                                <TextBlock Text="🚗 Vehículos Disponibles" 
                                           Foreground="#3498DB"
                                           FontSize="11" 
                                           FontWeight="Bold"/>
                                <TextBlock Text="0" 
                                           FontSize="28" 
                                           FontWeight="Black" 
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>

                        <Border Background="White" 
                                CornerRadius="15" 
                                Margin="8" 
                                Padding="25"
                                Effect="{StaticResource CardShadow}">
                            <StackPanel>
                                <TextBlock Text="👥 Clientes Registrados" 
                                           Foreground="#9B59B6" 
                                           FontSize="11" 
                                           FontWeight="Bold"/>
                                <TextBlock Text="0" 
                                           FontSize="28" 
                                           FontWeight="Black" 
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>

                        <Border Background="White" 
                                CornerRadius="15"
                                Margin="8" 
                                Padding="25" 
                                Effect="{StaticResource CardShadow}">
                            <StackPanel>
                                <TextBlock Text="👔 Empleados Activos" 
                                           Foreground="#E67E22" 
                                           FontSize="11" 
                                           FontWeight="Bold"/>
                                <TextBlock Text="0" 
                                           FontSize="28"
                                           FontWeight="Black"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>

                        <Border Background="White" 
                                CornerRadius="15" 
                                Margin="8" Padding="25"
                                Effect="{StaticResource CardShadow}">
                            <StackPanel>
                                <TextBlock Text="📄 Facturas Registradas" 
                                           Foreground="#2ECC71" 
                                           FontSize="11" 
                                           FontWeight="Bold"/>
                                <TextBlock Text="0" 
                                           FontSize="28"
                                           FontWeight="Black" 
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>

                    </UniformGrid>

                    <Border Background="White" 
                            CornerRadius="20" 
                            Padding="35" 
                            Margin="0,0,0,40" 
                            Effect="{StaticResource CardShadow}">
                        <StackPanel>
                            <TextBlock Text="Análisis Financiero de Activos" 
                                       FontSize="18" 
                                       FontWeight="Bold" 
                                       Margin="0,0,0,25" 
                                       Foreground="#1A1A1A"/>

                            <Grid Margin="0,0,0,15">
                                <TextBlock Text="💰 Valorización de Inventario (Real-Time)" 
                                           Foreground="#555" FontSize="14"/>
                                <TextBlock Text="$3.850.000.000 COP" 
                                           HorizontalAlignment="Right" 
                                           FontWeight="Bold" 
                                           Foreground="#2C3E50" 
                                           FontSize="16"/>
                            </Grid>

                            <Grid Margin="0,0,0,15">
                                <TextBlock Text="📈 Rendimiento de Ventas Mensuales" 
                                           Foreground="#555" 
                                           FontSize="14"/>
                                <TextBlock Text="$1.250.000.000 COP" 
                                           HorizontalAlignment="Right" 
                                           FontWeight="Bold" 
                                           Foreground="#27AE60" 
                                           FontSize="16"/>
                            </Grid>

                            <Grid Margin="0,0,0,15">
                                <TextBlock Text="⭐ Modelos de Mayor Rentabilidad" 
                                           Foreground="#555" 
                                           FontSize="14"/>
                                <TextBlock Text="Audi RS5 Sportback, BMW M4 Competition" 
                                           HorizontalAlignment="Right" 
                                           FontWeight="Bold" 
                                           Foreground="#D4AF37" 
                                           FontSize="14"/>
                            </Grid>

                            <Grid>
                                <TextBlock Text="📉 Costos Operativos Estimados" 
                                           Foreground="#555" 
                                           FontSize="14"/>
                                <TextBlock Text="$45.200.000 COP" 
                                           HorizontalAlignment="Right" 
                                           FontWeight="Bold" 
                                           Foreground="#E74C3C" 
                                           FontSize="14"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <Border Background="#F0F0F0" 
                            CornerRadius="20" 
                            Padding="35" 
                            Effect="{StaticResource CardShadow}">
                        <StackPanel>
                            <TextBlock Text="Protocolos de Operación" 
                                       FontSize="18" 
                                       FontWeight="Bold"
                                       Margin="0,0,0,25" 
                                       Foreground="#D4AF37"/>

                            <Grid Margin="0,0,0,18">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="🛒" FontSize="20" 
                                           VerticalAlignment="Center"/>
                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                    <TextBlock Text="Gestión de Activos y Logística" 
                                               Foreground="Black" 
                                               FontWeight="Bold"/>
                                    <TextBlock Text="Optimización de stock premium mediante inspección técnica de 110 puntos y valorización de mercado." 
                                               Foreground="#666" 
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>

                            <Grid Margin="0,0,0,18">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="💳" 
                                           FontSize="20"
                                           VerticalAlignment="Center"/>
                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                    <TextBlock Text="Transacciones y Pasarela Financiera" 
                                               Foreground="Black" 
                                               FontWeight="Bold"/>
                                    <TextBlock Text="Control centralizado de flujos de caja, planes de financiación bancaria y cierres de preventa." 
                                               Foreground="#666" 
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="📑" FontSize="20" 
                                           VerticalAlignment="Center"/>
                                <StackPanel Grid.Column="1" 
                                            Margin="10,0,0,0">
                                    <TextBlock Text="Cumplimiento Legal y Auditoría" 
                                               Foreground="Black" 
                                               FontWeight="Bold"/>
                                    <TextBlock Text="Seguimiento de facturación electrónica, trámites de tránsito y trazabilidad comercial según normativa." 
                                               Foreground="#666"
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>
            <ContentControl Content="{Binding CurrentView}"/>
        </Grid>
    </Grid>
</Window>